language: python
python:
  - "3.7"
install:
  - pip install -r requirements.txt -r requirements-dev.txt
script:
  - make lint
  - make unittest

deploy:
  provider: script
  user: __token__
  password: "$TEST_PYPI_ORG_TOKEN"
  distributions: "sdist bdist_wheel"
  server: https://test.pypi.org/legacy/
  on:
    all_branches: true
    tags: false
